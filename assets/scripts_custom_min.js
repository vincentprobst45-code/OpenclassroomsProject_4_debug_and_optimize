const gallery=document.querySelector(".gallery"),galleryImgList=document.querySelectorAll(".gallery-item"),options={columns:{xs:1,sm:2,md:3,lg:3,xl:3},lightBox:!0,lightboxId:"myAwesomeLightbox",showTags:!0,tagsPosition:"top",navigation:!0};function main(){gallery.setAttribute("style","display:block;");var e=[];createRowWrapper(gallery),options.lightBox&&createLightBox(gallery,options.lightboxId,options.navigation),galleryImgList.forEach((t=>{responsiveImageItem(t),wrapItemInColumn(t,options.columns);var l=gallery.dataset.galleryTag;options.showTags&&void 0!==l&&-1===e.indexOf(l)&&e.push(l),t.addEventListener("click",(e=>{options.lightBox&&"IMG"===e.target.tagName&&openLightBox(e.target,options.lightboxId)}))})),options.showTags}function createRowWrapper(e){e.firstElementChild.classList.contains("row")||e.insertAdjacentHTML("beforeend",'<div class="gallery-items-row row"></div>')}function wrapItemInColumn(e,t){const l=document.createElement("div");if(t.constructor===Number)l.setAttribute("class",`item-column mb-4 col-${Math.ceil(12/t)}`),gallery.querySelector(".gallery-items-row").appendChild(l),l.appendChild(e);else if(t.constructor===Object){var a="";t.xs&&(a+=` col-${Math.ceil(12/t.xs)}`),t.sm&&(a+=` col-sm-${Math.ceil(12/t.sm)}`),t.md&&(a+=` col-md-${Math.ceil(12/t.md)}`),t.lg&&(a+=` col-lg-${Math.ceil(12/t.lg)}`),t.xl&&(a+=` col-xl-${Math.ceil(12/t.xl)}`),l.setAttribute("class",`item-column mb-4${a}`),gallery.querySelector(".gallery-items-row").appendChild(l),l.appendChild(e)}else console.error(`Columns should be defined as numbers or objects. ${typeof t} is not supported.`)}function moveItemInRowWrapper(e){document.querySelector(".gallery-items-row").appendChild(e)}function responsiveImageItem(e){e.classList.add("img-fluid")}function toggleModal(e){const t=document.getElementsByTagName("body")[0],l=document.getElementById(e);t.classList.add("modal-open"),t.setAttribute("style","overflow: hidden; padding-right: 15px;"),l.classList.add("show"),l.setAttribute("style","display: block;"),l.setAttribute("role","dialog")}function openLightBox(e,t){document.getElementById(t).querySelector(".lightboxImage").setAttribute("src",e.src),new bootstrap.Modal(document.getElementById(t)).toggle()}function prevImage(){let e=null;const t=document.querySelectorAll("img.gallery-item"),l=document.querySelector(".lightboxImage");t.forEach((t=>{t.src===l.src&&(e=t)}));let a=document.querySelector(".tags-bar span.active-tag").dataset.imagesToggle,o=[];const i=document.querySelectorAll(".item-column");"all"===a?i.forEach((e=>{e.getElementsByTagName("img").length&&o.push(e.firstChild)})):i.forEach((e=>{e.getElementsByTagName("img").dataset.galleryTag===a&&o.push(e.firstChild)}));let s=0,r=null;o.forEach(((t,l)=>{e.getAttribute("src")===t.getAttribute("src")&&(s=l)})),r=o[s-1]||o[o.length-1],document.querySelector(".lightboxImage").setAttribute("src",r.getAttribute("src"))}function nextImage(){let e=null;const t=document.querySelectorAll("img.gallery-item"),l=document.querySelector(".lightboxImage");t.forEach((t=>{t.src===l.src&&(e=t)}));let a=gallery.querySelector(".tags-bar span.active-tag").dataset.imagesToggle,o=[];const i=document.querySelectorAll(".item-column");"all"===a?i.forEach((e=>{e.getElementsByTagName("img").length&&o.push(e.firstChild)})):i.forEach((e=>{e.getElementsByTagName("img").dataset.galleryTag===a&&o.push(e.firstChild)}));let s=0,r=null;o.forEach(((t,l)=>{e.getAttribute("src")===t.getAttribute("src")&&(s=l)})),r=o[s+1]||o[0],document.querySelector(".lightboxImage").setAttribute("src",r.getAttribute("src"))}function createLightBox(e,t,l){e.insertAdjacentHTML("afterbegin",`<div class="modal fade" id="${t||"galleryLightbox"}" tabindex="-1" role="dialog" aria-hidden="true">\n            <div class="modal-dialog" role="document">\n                <div class="modal-content">\n                    <div class="modal-body">\n                        ${l?'<div class="mg-prev" style="cursor:pointer;position:absolute;top:50%;left:-15px;background:white;"><</div>':'<span style="display:none;" />'}\n                        <img class="lightboxImage img-fluid" alt="Contenu de l'image affichÃ©e dans la modale au clique"/>\n                        ${l?'<div class="mg-next" style="cursor:pointer;position:absolute;top:50%;right:-15px;background:white;}">></div>':'<span style="display:none;" />'}\n                    </div>\n                </div>\n            </div>\n        </div>`),document.querySelector(".mg-prev").addEventListener("click",(()=>{prevImage(options.lightboxId)})),document.querySelector(".mg-next").addEventListener("click",(()=>{nextImage(options.lightboxId)}))}function generateFilters(){let e=[];galleryImgList.forEach((t=>{e.includes(t.dataset.galleryTag)||e.push(t.dataset.galleryTag)}));let t='<li class="nav-item"><span class="nav-link active active-tag"  data-images-toggle="all">Tous</span></li>';e.forEach((e=>{t+=`<li class="nav-item active">\n                <span class="nav-link"  data-images-toggle="${e}">${e}</span></li>`}));let l=document.createElement("ul");l.setAttribute("class","my-4 tags-bar nav nav-pills"),l.innerHTML=t,gallery.prepend(l),gallery.querySelectorAll(".nav-link").forEach((e=>e.addEventListener("click",(e=>{filterByTag(e.target)}))))}function filterByTag(e){if(!e.classList.contains("active-tag")){gallery.querySelector(".active-tag").classList.remove("active"),gallery.querySelector(".active-tag").classList.remove("active-tag"),e.classList.add("active-tag"),e.classList.add("active");var t=e.dataset.imagesToggle;galleryImgList.forEach((e=>{"all"===t||e.dataset.galleryTag===t?e.parentNode.hidden=!1:e.parentNode.hidden=!0}))}}main(),generateFilters();